{% extends 'base.html' %}

{% block content %}
<style>
    /* Custom CSS for User Profile Page */
    .container {
        margin-top: 30px;
        max-width: 900px;
        /* Adjust the max-width as desired */
        margin-left: auto;
        margin-right: auto;
        background-color: #eee;
    }

    .breadcrumb {
        background-color: #fff;
        border-radius: 0.25rem;
        padding: 1rem;
        margin-bottom: 1rem;
    }

    .card {
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        margin-bottom: 1rem;
    }

    .avatar {
        width: 150px;
    }

    .btn-follow {
        margin-bottom: 10px;
    }

    .social-icons .list-group-item {
        padding: 0.75rem;
    }

    .user-info .row {
        margin-bottom: 0.5rem;
    }

    .project-status .progress-bar {
        height: 5px;
    }
</style>

<section>
    <div class="container py-5">
        <div class="row">
            <div class="col">
                <center>
                    <h1>USER PROFILE</h1>
                </center>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-lg-4">
                <div class="card mb-4">
                    <div class="card-body text-center">
                        <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3.webp"
                            alt="avatar" class="rounded-circle img-fluid avatar">
                        <h5 class="my-3">{{ user.first_name }}</h5>
                        <p class="text-muted mb-1">{{ user.username }}</p>
                        <p class="text-muted mb-4">{{ user.email }}</p>
                        <div class="d-flex justify-content-center mb-2">
                            <!-- <button type="button" class="btn btn-primary btn-follow">Follow</button> -->
                            <button type="button" class="btn btn-outline-primary ms-1 position-relative">
                                Message
                                <span
                                    class="badge bg-danger position-absolute top-0 start-100 translate-middle p-1 rounded-circle">
                                    3 <!-- Replace with the actual notification count -->
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body p-0">
                        <ul class="list-group list-group-flush social-icons">
                            <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                                <i class="fas fa-globe fa-lg text-warning"></i>
                                <p class="mb-0">https://mdbootstrap.com</p>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                                <i class="fab fa-github fa-lg" style="color: #333333;"></i>
                                <p class="mb-0">mdbootstrap</p>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                                <i class="fab fa-twitter fa-lg" style="color: #55acee;"></i>
                                <p class="mb-0">@mdbootstrap</p>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                                <i class="fab fa-instagram fa-lg" style="color: #ac2bac;"></i>
                                <p class="mb-0">mdbootstrap</p>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                                <i class="fab fa-facebook-f fa-lg" style="color: #3b5998;"></i>
                                <p class="mb-0">mdbootstrap</p>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-lg-8">
                <div class="card mb-4">
                    <div class="card-body user-info">
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">Full Name</p>
                            </div>
                            <div class="col-sm-9">
                                <p class="text-muted mb-0">{{ user.first_name }} {{ user.last_name }}</p>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">Email</p>
                            </div>
                            <div class="col-sm-9">
                                <p class="text-muted mb-0">{{ user.email }}</p>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">Phone</p>
                            </div>
                            <div class="col-sm-9">
                                <p class="text-muted mb-0">+1 587 544 2154</p>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">Address</p>
                            </div>
                            <div class="col-sm-9">
                                <p class="text-muted mb-0">Bay Area, San Francisco, CA</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="card mb-4 mb-md-0">
                            <div class="card-body project-status">
                                <center>
                                    <h2>
                                        <p class="mb-4"><span class="text-primary font-italic me-1">Subscriptions</span>
                                        </p>
                                    </h2>
                                </center>
                                {% for payment in payments %}
                                <div class="subscription-item">
                                    <p class="subscription-name">{{ payment.software.name}}</p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        {% if payment.is_successful %}
                                        <span class="subscription-status badge bg-success">Paid</span>
                                        <span class="subscription-remaining badge bg-warning">{{payment.remaining_days}}
                                            Days Remaining</span>

                                        {% endif %}
                                    </div>
                                    <div class="progress rounded">
                                        <div class="progress-bar" role="progressbar" style="width: 80%"
                                            aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div>
                                {% endfor %}
                                <div class="subscription-item">
                                    <p class="subscription-name">Website Markup</p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="subscription-status badge bg-danger">Unpaid</span>
                                        <span class="subscription-remaining badge bg-warning">5 days</span>
                                    </div>
                                    <div class="progress rounded">
                                        <div class="progress-bar" role="progressbar" style="width: 60%"
                                            aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card mb-4 mb-md-0">
                            <div class="card-body">
                                <center>
                                    <h2 class="mb-4"><span class="text-primary font-italic me-1">User Requests</span>
                                        Status
                                    </h2>
                                </center>
                                {% for user_request in user_requests %}
                                <div class="card" style="width: 16rem;">
                                    <div class="card-body">
                                        <h5 class="card-title">{{ user_request.software_name }}</h5>
                                        <h6 class="card-subtitle mb-2 text-muted">{{ user_request.created_at }}</h6>
                                        <p class="card-text">{{ user_request.description }}</p>
                                        {% if user_request.is_approved %}
                                        <h4 class="card-text">Status: <button type="button"
                                                class="btn btn-success">Success</button></h4>
                                        {% elif user_request.is_rejected %}
                                        <h4 class="card-text">Status: <button type="button"
                                                class="btn btn-danger">Rejected</button>
                                        </h4>
                                        {% else %}
                                        <h4 class="card-text">Status: <button type="button"
                                                class="btn btn-outline-success">Pending</button></h4>
                                        {% endif %}
                                        <!-- <a href="{% url 'catalapp:request'%}" class="card-link">View Details</a> -->

                                        <hr>
                                        <div class="d-flex justify-content-center mb-2">
                                            <!-- <button type="button" class="btn btn-primary btn-follow">Follow</button> -->
                                            <button type="button"
                                                class="btn btn-outline-primary ms-1 position-relative">
                                                Message
                                                <span
                                                    class="badge bg-danger position-absolute top-0 start-100 translate-middle p-1 rounded-circle">
                                                    5 <!-- Replace with the actual notification count -->
                                                </span>
                                            </button>
                                        </div>
                                        <!-- {% if user_request.is_approved or user_request.is_rejected %}
                                        <a href="#" class="card-link">Revoke Approval</a>
                                        {% else %}
                                        <a href="#" class="card-link">Approve</a>
                                        <a href="#" class="card-link">Reject</a>
                                        {% endif %} -->
                                        <!-- <a href="{% url 'catalapp:request'  %}" class="card-link">View
                                            Details</a> -->
                                    </div>
                                </div>
                                {% endfor %}

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

</section>

<style>
    .user-info p,
    .project-status p {
        margin-bottom: 0;
    }
</style>
{% endblock %}